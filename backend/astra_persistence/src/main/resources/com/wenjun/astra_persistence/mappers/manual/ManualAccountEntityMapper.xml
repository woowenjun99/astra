<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wenjun.astra_persistence.mappers.manual.ManualAccountEntityMapper">
<select id="countByEmailAndPasswordProvider" resultType="java.lang.Long">
    select
        count(1)
    from accounts
    join accounts
    on accounts.uid = users.uid
    where
        accounts.provider_id = 'password'
        and users.email = #{email}
    limit 1 offset 0;
</select>
</mapper>